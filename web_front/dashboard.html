<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GigaFood - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">

        <header class="header">
            <h1 class="welcome-title" id="welcomeUser">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
            <div class="header-actions">
                <button class="btn btn-menu" onclick="window.location.href='menu.html'">‚ò∞</button>
                <button class="btn btn-logout" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </header>

        <main class="main">
            <div class="dashboard-content">

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é -->
                <div class="card">
                    <h3 class="card-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                    <div class="chart-container">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">–¶–µ–ª—å –ø–æ –∫–∞–ª–æ—Ä–∏—è–º</h3>
                    <div class="calorie-goal">
                        <span class="goal-number" id="calorieGoal"></span>
                        <p class="consumed" id="calorieConsumed"></p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                </div>

                <div id="foodTapeCard" class="card" style="display: none; margin-top: 16px;">
                    <div class="food-tape-container">
                        <h3 class="card-title">–°—ä–µ–¥–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</h3>
                        <div id="foodTape" class="food-tape">
                            <div class="empty-state">
                                <p>–ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ</p>
                                <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –µ–¥—ã, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-camera">
                        <span class="btn-text">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –µ–¥—ã</span>
                    </button>

                    <button class="btn btn-manual">
                        <span class="btn-text">–í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="foodModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞</h3>
                <button class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="modal-body">
                <div id="modalImageContainer">
                    <img id="modalImage" src="" alt="–ï–¥–∞" class="modal-image" style="display: none;">
                    <div id="modalIcon" class="modal-icon" style="display: none;">
                        <span>üçΩÔ∏è</span>
                    </div>
                </div>
                <div class="nutrients-grid">
                    <div class="nutrient">
                        <span class="nutrient-icon">–ö–∞–ª–æ—Ä–∏–∏</span>
                        <strong id="modalCalories">0</strong> –∫–∫–∞–ª
                    </div>
                    <div class="nutrient">
                        <span class="nutrient-icon">–ë–µ–ª–∫–∏</span>
                        <strong id="modalProtein">0</strong> –≥
                    </div>
                    <div class="nutrient">
                        <span class="nutrient-icon">–ñ–∏—Ä—ã</span>
                        <strong id="modalFat">0</strong> –≥
                    </div>
                    <div class="nutrient">
                        <span class="nutrient-icon">–£–≥–ª–µ–≤–æ–¥—ã</span>
                        <strong id="modalCarbs">0</strong> –≥
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ -->
    <div id="manualInputModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</h3>
                <button class="modal-close" onclick="closeManualInputModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="manualFoodForm" class="food-form">
                    <div class="form-group">
                        <label for="foodName">–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞</label>
                        <input type="text" id="foodName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–º–ª–µ—Ç —Å –æ–≤–æ—â–∞–º–∏" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="foodCalories">–ö–∞–ª–æ—Ä–∏–∏ (–∫–∫–∞–ª)</label>
                        <input type="number" id="foodCalories" placeholder="0" min="0" required>
                    </div>
                    
                    <div class="nutrients-grid">
                        <div class="form-group">
                            <label for="foodProtein">–ë–µ–ª–∫–∏ (–≥)</label>
                            <input type="number" id="foodProtein" placeholder="0" min="0" value="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="foodFat">–ñ–∏—Ä—ã (–≥)</label>
                            <input type="number" id="foodFat" placeholder="0" min="0" value="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="foodCarbs">–£–≥–ª–µ–≤–æ–¥—ã (–≥)</label>
                            <input type="number" id="foodCarbs" placeholder="0" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/storage.js"></script>
    <script type="module" src="js/dashboard.js"></script>
</body>
</html>